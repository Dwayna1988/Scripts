//****************************************************************************
// SPHERE by : Menasoft ©1997-2006
// www.sphereserver.com
// All SPHERE script files and formats are copyright Menasoft & Partners.
// This file may be freely edited for personal use, but may not be distributed
// in whole or in part, in any format without express written permission from
// Menasoft & Partners.  All donations and contributions
// become the property of Menasoft & Partners.
//
// DO NOT MAKE CHANGES TO DEFAULT SCRIPTS! MAKE YOUR ALTERATIONS IN CUSTOM FILES!
//****************************************************************************
// FILE LAST UPDATED: 27-Jul-2006
VERSION=0.56b

[Dialog d_Guild_WarfareStatus]
5,25

local.guild = <args>
if ( <local.guild> == 0 )
	return 1
endif
if ( <uid.<local.guild>.type> != T_STONE_GUILD )
	return 1
endif
local.oldobj = <obj.uid>
obj = <local.guild>
if (( <obj.memberfromuid.<uid>.uid> != <uid> ) && !<isgm> )
	obj = <local.oldobj>
	return 1
endif
local.charpriv = <QVAL <isgm> ? <def.STONEPRIV_MASTER> : <obj.memberfromuid.<uid>.priv> >
if ( !((<local.charpriv> == <def.STONEPRIV_MEMBER>) || (<local.charpriv> == <def.STONEPRIV_MASTER>)) )
	obj = <local.oldobj>
	return 1
endif
ctag.dialog_guildwarfarestatus_guilduid = <local.guild>
local.guildcount = <obj.guild.count>

// The gump
	
page 0
resizepic 0 0 5054 550 440
resizepic 10 10 3000 530 420
dhtmlgump 20 10 500 35 0 0 <def.center>WARFARE STATUS<def.centere>
button 20 400 4005 4007 1 0 0 // Quit
dhtmlgump 55 400 300 35 0 0 Return to the main menu.
	
page 1
button 375 375 5224 5224 0 2 0 // Next Page
dhtmlgump 410 373 100 25 0 0 Next page
dhtmlgump 20 45 400 20 0 0 We are at war with: 
// At War List
If ( <obj.guild.count <def.STONEPRIV_ENEMY>> == 0 )	
	dhtmlgump 20 65 400 20 0 0 No current wars
else
	local.gicurrent = 0
	local.gpcurrent = 0
	WHILE ( <local.gcurrent> < <local.guildcount> )
		if ( <obj.guild.<local.gicurrent>.isenemy> )
			dhtmlgump 20 <EVAL (60 + (<local.gpcurrent> * 20))> 300 20 <obj.guild.<local.gicurrent>.name> 0 0
			local.gpcurrent += 1
		endif
		local.gicurrent += 1
	ENDWHILE
endif
	
page 2
button 30 375 5223 5223 0 1 0 // Previous Page
dhtmlgump 65 373 150 25 0 0 Previous page
button 375 375 5224 5224 0 3 0 // Next Page
dhtmlgump 410 373 100 25 0 0 Next page
dhtmlgump 20 45 400 20 0 0 Guilds that we have declared war on: 
// We Declare List
If ( <obj.guild.count <def.STONEPRIV_WEDECLARED>> == 0 )	
	dhtmlgump 20 65 400 20 0 0 No current invitations received for war.
else
	local.gicurrent = 0
	local.gpcurrent = 0
	WHILE ( <local.gcurrent> < <local.guildcount> )
		if ( <obj.guild.<local.gicurrent>.wewar> )
			dhtmlgump 20 <EVAL (60 + (<local.gpcurrent> * 20))> 300 20 <obj.guild.<local.gicurrent>.name> 0 0
			local.gpcurrent += 1
		endif
		local.gicurrent += 1
	ENDWHILE
endif
	
page 3
button 30 375 5223 5223 0 2 0 // Previous Page
dhtmlgump 65 373 150 25 0 0 Previous page
dhtmlgump 20 45 400 20 0 0 Guilds that have declared war on us: 
// They Declared List
If ( <obj.guild.count <def.STONEPRIV_THEYDECLARED>> == 0 )	
		dhtmlgump 20 65 400 20 0 0 No current war declarations
else
	local.gicurrent = 0
	local.gpcurrent = 0
	WHILE ( <local.gcurrent> < <local.guildcount> )
		if ( <obj.guild.<local.gicurrent>.theywar> )
			dhtmlgump 20 <EVAL (60 + (<local.gpcurrent> * 20))> 300 20 <obj.guild.<local.gicurrent>.name> 0 0
			local.gpcurrent += 1
		endif
		local.gicurrent += 1
	ENDWHILE
endif

obj = <local.oldobj>
	
[Dialog d_Guild_WarfareStatus Button]
ON=0
	if (!<ctag0.dialog_guildwarfarestatus_guilduid>)
		serv.log DIALOG d_Guild_WarfareStatus called without ctag.dialog_guildwarfarestatus_guilduid !!
		return 1
	endif
	
	dialog d_Guild_Main,0,<ctag0.dialog_guildwarfarestatus_guilduid>
	ctag.dialog_guildwarfarestatus_guilduid =
	return 1
	
[EOF]